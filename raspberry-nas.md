---
title: åˆ©ç”¨æ ‘è“æ´¾æ­å»ºä¸€ä¸ªç®€æ˜“çš„NAS
date: 2017-07-20 22:39:35
tags: [raspberrypi,python,NAS]
categories: raspberrypi
---
# å‡†å¤‡
* raspberry pi 3
* ç¡¬ç›˜ï¼ˆæ ¼å¼åŒ–è¿‡ext4çš„ï¼‰
* è¿æ¥raspberryç”¨çš„ç»ˆç«¯

<!-- more -->

# å®‰è£…samba
````bash
sudo apt-get update
sudo apt-get install samba samba-common-bin
````

# é…ç½®samba
````bash
sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.back
sudo vim /etc/samba/smb.conf
````
````bash
# åœ¨æœ«å°¾åŠ å…¥å¦‚ä¸‹å†…å®¹
# åˆ†äº«åç§°
[MyNAS]
# è¯´æ˜ä¿¡æ¯
comment = NAS Storage
# å¯ä»¥è®¿é—®çš„ç”¨æˆ·
valid users = pi,root
# å…±äº«æ–‡ä»¶çš„è·¯å¾„,raspberry pi ä¼šè‡ªåŠ¨å°†è¿æ¥åˆ°å…¶ä¸Šçš„å¤–æ¥å­˜å‚¨è®¾å¤‡æŒ‚è½½åˆ°/media/pi/ç›®å½•ä¸‹ã€‚
path = /media/pi/
# å¯è¢«å…¶ä»–äººçœ‹åˆ°èµ„æºåç§°ï¼ˆéå†…å®¹ï¼‰
browseable = yes
# å¯å†™
writable = yes
# æ–°å»ºæ–‡ä»¶çš„æƒé™ä¸º 664
create mask = 0664
# æ–°å»ºç›®å½•çš„æƒé™ä¸º 775
directory mask = 0775
````
å¯ä»¥æŠŠé…ç½®æ–‡ä»¶ä¸­ä½ ä¸éœ€è¦çš„åˆ†äº«åç§°åˆ é™¤ï¼Œä¾‹å¦‚ [homes], [printers] ç­‰ã€‚
æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™è¯¯ï¼Œæ ¹æ®æç¤ºåšç›¸åº”ä¿®æ”¹
````bash
testparm
````
æ·»åŠ ç™»é™†è´¦æˆ·å¹¶åˆ›å»ºå¯†ç ï¼Œå¿…é¡»æ˜¯ linux å·²å­˜åœ¨çš„ç”¨æˆ·
````bash
sudo smbpasswd -a pi
````
é‡å¯ samba æœåŠ¡
````bash
sudo /etc/init.d/samba restart
````
# è¿æ¥
ä¸€èˆ¬æ ‘è“æ´¾è·Ÿä½ çš„WiFiç›¸è¿çš„è¯ï¼Œä½ çš„ç½‘ç»œå°±èƒ½çœ‹åˆ°è·Ÿä¸Šé¢é…ç½®ä¸€æ ·çš„åˆ†äº«åç§°ï¼Œå¦‚macä¸Šé¢è¿™æ ·çš„æ˜¾ç¤ºï¼š
[![](http://idiotsky.top/images/nas-screenshot.png)](http://idiotsky.top/images/nas-screenshot.png) 
å¦‚æœæ˜¾ç¤ºæ²¡æƒé™ï¼Œå¯ä»¥æ–­å¼€è¿æ¥ï¼Œç”¨ä½ ä¸Šé¢æ·»åŠ çš„è´¦å·ç™»å½•ã€‚

# é—®é¢˜æ€»ç»“
* åŸºæœ¬ä¸Šä¸æ˜¯ext4æ ¼å¼çš„ç¡¬ç›˜éƒ½ä¸ç”¨ä¸Šä¼ åˆ°NASä¸Šäº†ï¼Œå› ä¸ºæ ‘è“å¯¹å…¶ä»–æ ¼å¼çš„ç¡¬ç›˜åªæœ‰è¯»æƒé™ã€‚
* å¦‚æœæ˜¯ext4æ ¼å¼ï¼Œä¹Ÿä¸è¦é«˜å…´ï¼Œé‚£ä¸Šä¼ é€Ÿåº¦å¯ä»¥ğŸ˜­çš„
* å¦‚æœæ˜¯å…¶ä»–æ ¼å¼çš„è¯ï¼Œä¸Šé¢éƒ½è¯´åªèƒ½è¯»ï¼Œä¸€èˆ¬æƒ…å†µæ‹·è¿›ç¡¬ç›˜çš„ç‰‡ç‰‡æ˜¯å¯ä»¥ç”¨piç”¨æˆ·è¯»çš„ï¼Œå¦‚æœé‡åˆ°è¿piç”¨æˆ·éƒ½æ²¡æœ‰è¯»æƒé™çš„è¯ï¼Œè€Œä¸”ç™»ä¸Šæ ‘è“æ´¾è¿›åˆ°ç¡¬ç›˜é‡Œé¢å¼ºåˆ¶æ”¹æƒé™éƒ½æ˜¯æ”¹ä¸äº†çš„ã€‚æ‰€ä»¥ï¼Œè€è€å®å®åŠ ä¸ªrootç”¨æˆ·å§ã€‚
    ````bash
    sudo smbpasswd -a root
    ````
* ç”¨rootç”¨æˆ·è¿ä¸Šå»åŸºæœ¬æ²¡æœ‰ä¸èƒ½è¯»çš„ã€‚ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½å†™ã€‚è€è€å®å®è¿˜æ˜¯æ‹”ç¡¬ç›˜åˆ°ç”µè„‘çƒ¤å§ã€‚